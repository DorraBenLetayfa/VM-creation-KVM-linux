#cloud-config
hostname: {{ vm_name }}.smartek.ae
manage_etc_hosts: true

users:
  - name: {{ vm_user | default('ansible') }}
    ssh-authorized-keys:
      - "{{ ssh_public_key | default(lookup('file', '~/.ssh/id_rsa.pub')) }}"
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo
    shell: /bin/bash

chpasswd:
  list: |
    {{ vm_user | default('ansible') }}:{{ vm_password | default('ansible') }}
  expire: False

package_update: true
packages:
  - vim
  - curl
runcmd:
  - [ sh, -c, "echo 'Provisioned by Ansible + cloud-init' > /etc/motd" ]
